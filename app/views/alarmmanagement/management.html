<script type="text/ng-template" id="showDefinitionConfig.html">
    <div class="modal-header">
        <button type="button" class="close" ng-click="closeModal()"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title">{{'ocsp_web_alarmmanagement_config' | translate}}</h3>
    </div>
    <div class="modal-body">
        <form name="alarmInfoForm" id="idAlarmInfoForm">
            <div class="form-group">
                <div class="">
                    <table ng-table="allStreams" class="table table-condensed table-bordered">
                        <thead>
                          <tr>
                            <th>{{'ocsp_web_alarm_configuration_name' | translate}}</th>
                            <th>{{'ocsp_web_alarm_configuration_current' | translate}}</th>
                            <th>{{'ocsp_web_alarm_configuration_latest' | translate}}</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="item in $data" ng-click="item.selected = !item.selected">
                            <td class="centertext">
                                <input name="{{item.id}}" type="checkbox" ng-click="item.selected = !item.selected" ng-model="item.selected"/>
                                {{item.name}}
                            </td>
                            <td>
                                <textarea ng-model="item.oldAlarmConfigsString" class="form-control" rows="2" ng-disabled="true" />
                            </td>
                            <td>
                                <textarea ng-model="item.newAlarmConfigsString" class="form-control" rows="2" ng-disabled="true" />
                            </td>
                          </tr>
                        </tbody>
                      </table>
                </div>
            </div>

            <div class="form-group">
                <button type="button" class="btn oc-button" ng-disabled="!calcSelectedItems(allStreamsData)" ng-click="showDetailConfig(allStreamsData,propertiesToConfig)">
                    {{ 'ocsp_web_common_configuration' | translate }}
                </button>
                <button type="button" class="btn oc-button" ng-click="saveAndCloseModal()">
                    {{'ocsp_web_common_009' | translate}}
                </button>
            </div>
        </form>
    </div>
  </script>


  <script type="text/ng-template" id="showDefinitionConfigDetails.html">
    <div class="modal-header">
        <button type="button" class="close" ng-click="closeDetailModal()"><span aria-hidden="true">&times;</span>
        </button>
        <h3 class="modal-title">{{'ocsp_web_alarm_configuration_detail' | translate}}</h3>
    </div>
    <div class="modal-body">
        <form name="alarmInfoForm" id="idAlarmInfoForm">
            <div class="form-group">
                <div class="">
                    <h2>{{errorMsg}}</h2>
                </div>
                <div class="">
                    <table ng-table="allAlarmPropertiesCanBeConfigured" class="table table-condensed table-bordered">
                        <colgroup>
                            <col width="30%"/>
                            <col width="70%"/>
                        </colgroup>
                        <tr ng-repeat="onePropertyItem in $data">
                            <td title="'ocsp_web_common_name' | translate" ng-form="name">
                                <input type="text" name="name" readonly="true"
                                       ng-model="onePropertyItem.name" class="form-control" required/>
                            </td>
                            <td title="'ocsp_web_common_value' | translate" ng-form="name">
                                <input type="text" name="value"
                                       ng-model="onePropertyItem.value" class="form-control" required/>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="form-group">
                <button type="button" class="btn oc-button" ng-click="saveAndCloseDetailModal()">
                    {{'ocsp_web_common_038' | translate}}
                </button>
            </div>
        </form>
    </div>
</script>



<div class="row">
    <div class="col-md-12 main">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div>
                    {{'ocsp_web_alarmmanagement_config' | translate}}
                </div>
            </div>
            <div class="panel-body">
                <table ng-table="allAlarmDefinitions" class="table table-condensed table-bordered">
                    <colgroup>
                        <col width="35%" />
                        <col width="20%" />
                        <col width="30%" />
                        <col width="15%" />
                    </colgroup>
                    <tr ng-repeat="oneAlarmDefinition in $data">
                        <td title=" 'ocsp_web_alarm_alarmname' | translate " ng-form="alarm_name">
                            <a>{{oneAlarmDefinition.alarm_name}}</a>
                        </td>
                        <td title=" 'ocsp_web_alarm_alarmlevel' | translate " ng-form="alarm_level">
                            <a>{{oneAlarmDefinition.alarm_levelName}}</a>
                        </td>
                        <td title=" 'ocsp_web_alarm_alarmcomponentname' | translate " ng-form="alarm_component_name">
                            <a>{{oneAlarmDefinition.alarm_component_name}}</a>
                        </td>
                        <td title="'ocsp_web_streams_manage_023' | translate" ng-form="action">
                            <a ng-click="showConfigPage(oneAlarmDefinition)" class="btn oc-button">{{'ocsp_web_common_check' | translate}}</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 main">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div>
                    {{'ocsp_web_alarmmanagement' | translate}}
                </div>
            </div>
            <div class="panel-body">
                <table ng-table="allAlarms" class="table table-condensed table-bordered">
                    <colgroup>
                        <col width="15%" />
                        <col width="10%" />
                        <col width="15%" />
                        <col width="15%" />
                        <col width="15%" />
                        <col width="15%" />
                        <col width="15%" />
                    </colgroup>
                    <tr ng-repeat="oneAlarm in $data">
                        <td title="'ocsp_web_alarm_alarmname' | translate " ng-form="alarmlevel">
                            <a>{{oneAlarm.alarm_name}}</a>
                        </td>
                        <td title="'ocsp_web_alarm_alarmstatus' | translate " ng-form="alarmlevel">
                            <a class="btn" ng-class="{true:'btn-danger',false:'btn-warning'}[oneAlarm.alarm_level.en==='Critical']" ng-if="oneAlarm.alarm_type==='0'">{{{"en":"WARN","zh":"告警"}[lang]}}</a>
                            <a class="btn btn-success" ng-if="oneAlarm.alarm_type==='1'">{{{"en":"OK","zh":"已恢复"}[lang]}}</a>
                        </td>
                        <td title=" 'ocsp_web_streams_manage_052' | translate " ng-form="taskid">
                            <a>{{oneAlarm.name}}</a>
                        </td>
                        <td title=" 'ocsp_web_alarm_alarmcomponentname' | translate " ng-form="componentname">
                            <a>{{oneAlarm.componentNameFromTargetTable}}</a>
                        </td>
                        <td title=" 'ocsp_web_alarm_alarmlevel' | translate " ng-form="alarmlevel">
                            <a>{{oneAlarm.alarm_levelName}}</a>
                        </td>
                        <td title="'ocsp_web_common_alarmtime' | translate" ng-form="alarmtime">
                            <a>{{oneAlarm.alarm_time}}</a>
                        </td>
                        <td title="'ocsp_web_streams_manage_023' | translate" ng-form="action">
                            <a href="#/alarmmanagement/{{oneAlarm.stream_alarm_id}}" class="btn oc-button">{{'ocsp_web_common_check' | translate}}</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>